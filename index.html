<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_mgig5aq7i5y6-3{list-style-type:none}.lst-kix_mgig5aq7i5y6-6>li:before{content:"\0025cf  "}ul.lst-kix_mgig5aq7i5y6-2{list-style-type:none}ul.lst-kix_mgig5aq7i5y6-5{list-style-type:none}ul.lst-kix_mgig5aq7i5y6-4{list-style-type:none}.lst-kix_mgig5aq7i5y6-4>li:before{content:"\0025cb  "}.lst-kix_mgig5aq7i5y6-8>li:before{content:"\0025a0  "}ul.lst-kix_mgig5aq7i5y6-1{list-style-type:none}.lst-kix_mgig5aq7i5y6-3>li:before{content:"\0025cf  "}.lst-kix_mgig5aq7i5y6-7>li:before{content:"\0025cb  "}ul.lst-kix_mgig5aq7i5y6-0{list-style-type:none}ul.lst-kix_mgig5aq7i5y6-7{list-style-type:none}ul.lst-kix_mgig5aq7i5y6-6{list-style-type:none}.lst-kix_mgig5aq7i5y6-5>li:before{content:"\0025a0  "}ul.lst-kix_mgig5aq7i5y6-8{list-style-type:none}.lst-kix_mgig5aq7i5y6-0>li:before{content:"\0025cf  "}.lst-kix_mgig5aq7i5y6-2>li:before{content:"\0025a0  "}.lst-kix_mgig5aq7i5y6-1>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c15{color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c14{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c1{padding-top:0pt;text-indent:36pt;padding-bottom:12pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c19{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:2.0;orphans:2;widows:2;text-align:left}.c0{color:#4d6680;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Times New Roman";font-style:normal}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left;height:11pt}.c13{padding-top:0pt;padding-bottom:12pt;line-height:1.5;orphans:2;widows:2;text-align:center}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:center}.c5{padding-top:0pt;padding-bottom:12pt;line-height:1.0;orphans:2;widows:2;text-align:center}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:12pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c6{padding-top:0pt;padding-bottom:0pt;line-height:2.0;orphans:2;widows:2;text-align:center}.c18{font-size:12pt;font-family:"Times New Roman";color:#232333;font-weight:400}.c17{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c16{font-size:12pt;font-family:"Times New Roman";color:#999999;font-weight:400}.c9{font-size:12pt;font-family:"Times New Roman";font-style:italic;font-weight:700}.c12{font-size:12pt;font-family:"Times New Roman";font-weight:700}.c22{font-size:12pt;font-family:"Times New Roman";font-weight:400}.c20{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c21{text-indent:36pt}.c23{color:#4d6680}.c7{height:11pt}.c8{background-color:#ffffff}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c8 c20"><p class="c6"><span class="c0">Tornado Simulation Report</span></p><p class="c6"><span class="c16">Morgan H, Joshua C, Gabriel K, Alex Y</span></p><hr><p class="c6 c7"><span class="c15"></span></p><p class="c10"><span class="c0 c8">Abstract</span></p><p class="c11 c21"><span class="c8 c18">This project sets out to create a realistic virtual simulation of a tornado. It uses a basic graphics engine and physics based system to emulate a tornado&#39;s nature. We build a graphics engine from the ground up, using OpenGL and various other libraries. In addition, we mathematically defined a function, through systematic trial and error, to control the particles to move in a tornado-like motion. All these particles in total create a visually realistic tornado.</span></p><hr><p class="c13 c7"><span class="c0"></span></p><p class="c13"><span class="c0">Technical Approach</span></p><p class="c4"><span class="c14">To start, the graphics engine was based on OpenGL, GLFW, and glm. These are low level libraries to directly communicate with the graphics card on the computer. Specifically, OpenGL renders the vertices, GLFW renders the output to a window, and GLM is a library to assist in vector and matrix operations, as well as other graphical helper functions. We give these libraries the set of vertices, matrix transformations, and shaders we want to compile. It then draws them on the screen accordingly. Because we control each vertex and lighting element, for our particle system, this means more control over the appearance and position, as well as higher performance. To learn how to use these libraries, we mainly used a website (learnopengl.com) to read tutorials.</span></p><p class="c4"><span class="c14">Once we were able to draw a quad on the screen, we began by drawing many smaller quads to emulate a particle system. A game loop was created to control the FPS of the rendering loop so we can regulate the time transition of the system for realistic particle movement. Each time the render loop is iterated, we clear the scene, draw each particle as a quad, and render the scene. To have the quads look like particles, we made each quad always face the camera, so there was no sense of the particles having a 2d nature. This created the illusion that the particles were three dimensional, which is realistic.</span></p><p class="c4"><span class="c14">Once we were able to render the particles, we then had to make them move. To do this, we designed an algorithm that controls the motion of each particle, such that each particle travels the path a typical particle would be believed to travel in a tornado. When all these particles are rendered together, it creates the visual of a tornado.</span></p><p class="c4"><span class="c14">The tornado function, as it will be called, is periodic in nature. Despite each particle having a rhythmic nature, the tornado looks chaotic. This is due to the nature of chaos. When a lot of smaller controlled systems that are slightly out of phase are put together, to the observer, it is a completely un pardernistic system. </span></p><p class="c4"><span class="c14">To do this, we must look at the attributes of a particle. In addition to a 3D coordinate, particles have a random starting angle, a radius, a random offset value [0.5,1.5], and a directional parameter. The radius is calculated as the particle&rsquo;s initial distance from the scene&rsquo;s origin. </span></p><p class="c4"><span class="c14">The tornado function works as follows: Upon every loop, we calculate the center of the circle at which the particle is orbiting. This is done to build the core of the tornado, as a high level understanding of it is that the tornado is built as a series of circulating rings of particles following a wavy curve. This is accomplished using two sine functions, depending on the particle&rsquo;s radius, to calculate the x and z coordinates of the circle&rsquo;s center. </span></p><p class="c5"><img src="images/image1.png"></p><p class="c5"><img src="images/image2.png"></p><p class="c4"><span class="c14">Shift is a term that&rsquo;s incremented upon every iteration of the for loop to introduce a phase shift on the tornado and rotate the core.</span></p><p class="c4"><span class="c14">In addition to this, the expected y-position of the particle is calculated as the square root of 144 multiplied by the particle&rsquo;s starting radius. We use the basic formula to find the point on a circle given an origin, radius, and angle to calculate the next x and z-positions of the particle, that being </span></p><p class="c5"><img src="images/image3.png"></p><p class="c5"><img src="images/image4.png"></p><p class="c4"><span class="c14">Where step is a value that&rsquo;s incremented upon every iteration of the for loop. The min function makes it so particles further up the tornado spin slower, and the startAngle introduces a random starting position on the circle so that particles are evenly distributed.</span></p><p class="c4"><span class="c14">Now we update the particle&rsquo;s (x, y, z) coordinates, and then either increment or decrement the particle&rsquo;s radius depending on its directional boolean value. This causes the particle to spiral upwards or downwards. If the particle reaches the top or bottom of the simulation area, the direction is reversed.</span></p><p class="c4"><span class="c14">(Note that every numerical coefficient was decided upon what looked the best visually)</span></p><p class="c4"><span class="c22">To enhance the visual experience, we made the camera able to move around the scene. This enables the observer to be able to get a better understanding of the system. This is also important, because in any realistic simulation, the viewpoint is likely not going to be fixed, so the tornado needs to look realistic from all positions.</span></p><hr><p class="c13 c7"><span class="c0"></span></p><p class="c13"><span class="c0">Description of Problems</span></p><p class="c1"><span class="c14">Since we decided to start from scratch, we ran into many setup issues from the get-go. Two of our team members were using Visual Studio on Windows, and the other two team members were using Xcode on Mac. To begin, the Windows team successfully followed the openGL setup tutorial to lay the foundation for the basic particle simulator. However, the Mac team was unable to reproduce the result on Xcode since all of the code on the repository was IDE-specific. Thus, as a solution, we decided to only put the core graphics files on the github repository and leave out the IDE-specific files. Each member would have their own IDE-specific files on their own personal computer, and would just pull the shared files as needed. While this was a little bit tedious at first, it ended up saving us a lot of time in the long run. This enabled each group member to be able to effectively contribute to the project as a whole.</span></p><p class="c1"><span class="c14">After the setup was completed on both Mac and Windows, we ran into an issue with the camera&rsquo;s starting and target position. While we had gotten to the point where we could successfully render particles on the screen, we had trouble figuring out the right place to position the camera, in addition to the right place that the camera should be pointing to. After much trial and error, we decided to position the camera at a slight offset to the origin. This worked for us since the particles themselves were centered at the origin, so the camera was able to accurately capture all of the particles in the tornado simulation. </span></p><p class="c13 c7"><span class="c0"></span></p><hr><p class="c13 c7"><span class="c0"></span></p><p class="c13"><span class="c0">Description of Lessons </span></p><p class="c1"><span class="c14">The most valuable knowledge we gained was from setting up the graphics simulator on two different operating systems. Since all of our class projects were nicely setup for us, we never really had to worry about the painstaking steps that are taken to accommodate many different operating systems. Thus, by following the many tutorials to setup openGL on different IDEs and different operating systems, we were able to learn more about how the files are organized, how libraries are imported and utilized, and the efficient ways of setting up our code on github such that many people can collaborate and work on the graphics project at the same time. </span></p><p class="c1"><span class="c14">In addition, we learned a lot about the different ways tornadoes can be simulated. For instance, some tornadoes have forces being applied to the particles to create the funnel-like cone shape. However, for ours, we have the particles orbit around a sine-like curve, simulating the look of a tornado.</span></p><p class="c10 c7"><span class="c0"></span></p><hr><p class="c10 c7"><span class="c0"></span></p><p class="c10"><span class="c12 c23">Results</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 488.00px;"><img alt="" src="images/image5.gif" style="width: 624.00px; height: 488.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c0"></span></p><p class="c3"><span class="c0"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 400.00px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 400.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 481.33px;"><img alt="" src="images/image6.png" style="width: 624.00px; height: 481.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c0"></span></p><hr><p class="c7 c10"><span class="c0"></span></p><p class="c10"><span class="c0">References</span></p><p class="c19"><span class="c12">Vries, J. D. (n.d.). </span><span class="c9">Learn OpenGL, extensive tutorial resource for learning Modern OpenGL</span><span class="c12 c17">. Www.Learnopengl.Com. Retrieved May 10, 2022, from https://learnopengl.com/</span></p><p class="c3"><span class="c14"></span></p><p class="c11"><span class="c12">https://cs.uwaterloo.ca/~jwlwan/papers/WanDing05.pdf</span></p><p class="c10 c7"><span class="c0"></span></p><hr><p class="c10 c7"><span class="c0"></span></p><p class="c10"><span class="c0">Contributions</span></p><p class="c11"><span class="c12">Morgan: </span><span class="c14">Create window (GLFW), shader program, render loop, all opengl function calls. Camera and view model matrices. Make quads face camera. Keep the render loop at stable fps with sleep calls.</span></p><p class="c11"><span class="c12">Alex: </span><span class="c14">Fixed camera and tornado positioning. Created tornado function to give it its shape and spin.</span></p><p class="c11"><span class="c12">Gabriel: </span><span class="c14">Setting up openGL in Xcode on Mac, tornado particle simulation and polishing, moving the camera around with arrow keys, adding transparency to particles, making the tornado more dust-colored</span></p><p class="c11"><span class="c12">Joshua:</span><span class="c14">&nbsp;Initial setup on Windows, research on tornadoes</span></p><p class="c3"><span class="c14"></span></p><p class="c3"><span class="c14"></span></p><p class="c11"><span class="c14">Final Project Video (link attached to video)</span></p><p class="c3"><span class="c14"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 384.77px;"><a href="https://youtu.be/svsmsJQSVLI"><img alt="" src="images/image7.png" style="width: 624.00px; height: 400.00px; margin-left: 0.00px; margin-top: -15.23px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></a></span></p><p class="c3"><span class="c14"></span></p></body></html>
